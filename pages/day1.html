<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jour 1 ‚Äî Fondamentaux des Web Services</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../styles/day1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="nav-container">
        <div class="nav-logo">
            <img src="../assets/logo.jpeg" alt="YNOV Campus" class="logo-img">
            <span class="logo-text">Web Services</span>
        </div>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="../index.html" class="nav-link">Accueil</a>
            </li>
            <li class="nav-item">
                <a href="../index.html#programme" class="nav-link">Programme</a>
            </li>
            <li class="nav-item">
                <a href="../index.html#projet" class="nav-link">Projet SmartCity</a>
            </li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle">
                    <i class="fas fa-calendar-alt"></i> Journ√©es
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="dropdown-menu">
            <a href="day1.html" class="dropdown-item">Jour 1 - Th√©orie</a>
            <a href="day1FilRouge.html" class="dropdown-item">Jour 1 - Fil Rouge</a>
            <a href="day2.html" class="dropdown-item">Jour 2 - Th√©orie</a>
            <a href="day2FilRouge.html" class="dropdown-item">Jour 2 - Fil Rouge</a>
            <a href="day3.html" class="dropdown-item">Jour 3 - Th√©orie</a>
            <a href="day3FilRouge.html" class="dropdown-item">Jour 3 - Fil Rouge</a>
                </div>
            </li>
            <li class="nav-item">
                <a href="#ressources" class="nav-link">Ressources</a>
            </li>
            <li class="nav-item">
                <a href="../index.html#contact" class="nav-link">Contact</a>
            </li>
        </ul>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </div>
</nav>

  <!-- Hero -->
  <section class="hero" style="min-height: 60vh;">
    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="hero-title">Jour 1</h1>
          <h2 class="hero-subtitle">Fondamentaux des Web Services</h2>
          <p class="hero-description">
            Introduction aux Web Services, architecture client-serveur, HTTP, et formats d'√©change de donn√©es.
          </p>
          <div class="hero-buttons">
            <a href="day1FilRouge.html" class="btn btn-primary"><i class="fas fa-code"></i>D√©marrer l'atelier</a>
            <a href="../index.html#programme" class="btn btn-secondary"><i class="fas fa-arrow-left"></i>Retour au programme</a>
          </div>
        </div>
        <div class="hero-image-container">
          <img src="../assets/home.jpg" alt="Campus moderne" class="hero-image">
        </div>
      </div>
    </div>
  </section>

  <!-- Objectifs -->
  <section class="introduction">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Objectifs d'apprentissage</h2>
      </div>
      <div class="intro-grid">
        <div class="intro-card">
          <div class="card-icon"><i class="fas fa-globe"></i></div>
          <h3>Web Services</h3>
          <p>D√©finir ce qu'est un web service et comprendre son r√¥le dans l'architecture moderne.</p>
        </div>
        <div class="intro-card">
          <div class="card-icon"><i class="fas fa-server"></i></div>
          <h3>Architecture Client-Serveur</h3>
          <p>Ma√Ætriser le mod√®le client-serveur et le protocole HTTP/HTTPS.</p>
        </div>
        <div class="intro-card">
          <div class="card-icon"><i class="fas fa-exchange-alt"></i></div>
          <h3>M√©thodes HTTP</h3>
          <p>Utiliser correctement les m√©thodes HTTP (GET, POST, PUT, PATCH, DELETE).</p>
        </div>
        <div class="intro-card">
          <div class="card-icon"><i class="fas fa-code"></i></div>
          <h3>Formats d'√©change</h3>
          <p>Travailler avec JSON et XML pour √©changer des donn√©es entre syst√®mes.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contenu de cours approfondi -->
  <section class="programme">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Fondamentaux des Web Services ‚Äî Cours d√©taill√©</h2>
        <p class="section-subtitle">Th√©orie compl√®te des Web Services avec exemples concrets et bonnes pratiques</p>
      </div>

      <!-- Navigation vers Fil Rouge -->
      <div class="navigation-section">
        <div class="nav-buttons">
          <a href="day1FilRouge.html" class="nav-button">
            <i class="fas fa-code"></i> Fil Rouge J1
          </a>
        </div>
      </div>

      <div class="days-container">
        <div class="day-card expanded">
            <div class="day-header">
              <span class="day-number">1</span>
              <span class="day-theme">Introduction aux Web Services</span>
            </div>
          <div class="day-content">
            <div class="day-morning">
              <h4><i class="fas fa-globe"></i> Qu'est-ce qu'un Web Service ?</h4>
              
              <p>Imaginons une banque nationale en 1995. √Ä Paris, le syst√®me informatique tourne en COBOL sur un mainframe IBM. √Ä Lyon, les d√©veloppeurs ont choisi du C++ sur des serveurs Unix. √Ä Marseille, les agences utilisent du Visual Basic sur Windows. Trois syst√®mes, trois langages, trois architectures compl√®tement diff√©rentes. Un jour, le directeur g√©n√©ral annonce lors d'une r√©union : "Nous devons permettre √† nos clients de consulter leur compte depuis n'importe quelle agence, pas seulement celle o√π ils ont ouvert leur compte."</p>

              <p>L'√©quipe technique se retrouve face √† un casse-t√™te monumental. Comment faire communiquer ces trois syst√®mes qui ne parlent litt√©ralement pas le m√™me langage ? Comment s'assurer qu'une requ√™te envoy√©e depuis Paris peut √™tre comprise par le syst√®me de Lyon ? Et surtout, comment faire √ßa sans tout r√©√©crire depuis z√©ro ?</p>

              <p>C'est pr√©cis√©ment ce type de probl√®me que les web services sont venus r√©soudre. Un web service est un syst√®me logiciel qui permet √† deux applications de communiquer entre elles via un r√©seau, g√©n√©ralement Internet, en utilisant des standards ouverts que tout le monde comprend. C'est un peu comme un interpr√®te universel qui traduit entre diff√©rentes langues informatiques.</p>

              <div class="highlight-box">
                <h6>üí° Exemple Concret : Application M√©t√©o</h6>
                <p>Imaginons que vous d√©veloppez une application m√©t√©o pour smartphone. Votre application ne dispose d'aucun capteur m√©t√©orologique, elle ne sait pas mesurer la temp√©rature, l'humidit√© ou la pression atmosph√©rique. Pourtant, quand un utilisateur ouvre l'application, celle-ci affiche instantan√©ment "25¬∞C √† Paris, risque de pluie √† 15h". Comment est-ce possible ?</p>
                <p>L'application envoie simplement une requ√™te √† un web service de m√©t√©o : "Donne-moi les pr√©visions m√©t√©orologiques pour Paris". Le service m√©t√©o, qui lui agr√®ge les donn√©es de milliers de stations m√©t√©orologiques √† travers le monde, r√©pond avec des donn√©es structur√©es. L'application les re√ßoit, les met en forme joliment, et les affiche √† l'utilisateur. Tout ce processus prend quelques centaines de millisecondes et reste compl√®tement transparent pour l'utilisateur final.</p>
              </div>

              <h5>üèóÔ∏è Les Trois Composants Fondamentaux</h5>
              <p>Cette architecture repose sur trois composants fondamentaux :</p>
              <ul>
                <li><strong>Provider (fournisseur)</strong> : Celui qui expose des fonctionnalit√©s ou des donn√©es</li>
                <li><strong>Consumer (consommateur)</strong> : L'application qui utilise ces fonctionnalit√©s</li>
                <li><strong>Contract (contrat)</strong> : Les r√®gles du jeu (format, protocole, donn√©es)</li>
              </ul>

              <h4 class="mt-5"><i class="fas fa-history"></i> L'√©volution : de la complexit√© √† la simplicit√©</h4>
              
              <p>L'histoire des web services est celle d'un aller-retour fascinant entre la complexit√© et la simplicit√©. Dans les ann√©es 90, quand les premi√®res tentatives de faire communiquer des applications distantes ont √©merg√©, les ing√©nieurs ont cr√©√© des technologies comme CORBA (Common Object Request Broker Architecture) ou DCOM (Distributed Component Object Model). Ces technologies promettaient de r√©soudre tous les probl√®mes d'interop√©rabilit√©, mais elles √©taient d'une complexit√© redoutable.</p>

              <p>Au d√©but des ann√©es 2000, une nouvelle approche a √©merg√© : SOAP (Simple Object Access Protocol). L'ironie du nom "Simple" n'a √©chapp√© √† personne par la suite. L'id√©e de d√©part √©tait pourtant bonne : utiliser XML, un format texte structur√© et lisible par l'homme, pour √©changer des messages entre applications.</p>

              <div class="highlight-box">
                <h6>üí° Exemple Concret : SOAP en 2007</h6>
                <p>Imaginons une entreprise de e-commerce en 2007 qui souhaite int√©grer un syst√®me de paiement par carte bancaire via SOAP. L'√©quipe technique re√ßoit un fichier WSDL de 3000 lignes. Pour effectuer un simple paiement de 50 euros, il faut construire une enveloppe SOAP avec des namespaces XML imbriqu√©s, des headers de s√©curit√© avec signatures num√©riques, des timestamps... Le moindre espace mal plac√© dans le XML fait √©chouer toute la communication, avec des messages d'erreur absolument cryptiques. L'int√©gration qui devait prendre une semaine se transforme en projet de trois mois.</p>
              </div>

              <p>Pendant ce temps, en 2000, Roy Fielding publiait sa th√®se de doctorat introduisant REST (Representational State Transfer). Mais dans le tumulte de l'engouement pour SOAP, personne n'y pr√™tait vraiment attention.</p>

              <p>Puis, vers 2005, quelque chose d'int√©ressant s'est produit. Les startups du Web 2.0 ‚Äì Flickr pour le partage de photos, del.icio.us pour les marque-pages sociaux, puis Twitter et Facebook ‚Äì ont commenc√© √† ouvrir leurs plateformes aux d√©veloppeurs externes. Elles avaient besoin de cr√©er des APIs simples, rapides √† mettre en ≈ìuvre, et faciles √† utiliser. Elles ont choisi REST, pas SOAP.</p>

              <h4 class="mt-5"><i class="fas fa-chart-line"></i> Pourquoi utiliser des Web Services ?</h4>
              
              <p>L'histoire de Stripe illustre parfaitement la puissance des web services bien con√ßus. En 2010, les fr√®res Patrick et John Collison, irlandais install√©s en Californie, constatent la complexit√© d'accepter des paiements en ligne. Ils fondent Stripe avec une promesse r√©volutionnaire : int√©grer les paiements avec 7 lignes de code. Pas d'installation lourde, pas de configuration labyrinthique, juste quelques appels √† une API REST √©l√©gante. En 2025, Stripe traite des centaines de milliards de dollars par an et est valoris√©e √† plus de 50 milliards de dollars.</p>

              <h5>üéØ Premier avantage : l'interop√©rabilit√© universelle</h5>
              <p>Imaginons une startup qui d√©veloppe une plateforme de r√©servation de restaurants. L'√©quipe souhaite √™tre pr√©sente partout : application iPhone, application Android, site web desktop, site web mobile, voire m√™me des bornes tactiles dans les restaurants. Sans web services, il faudrait d√©velopper la logique m√©tier cinq fois : une fois en Swift pour iOS, une fois en Kotlin pour Android, une fois en JavaScript pour le web, une fois en Python pour les bornes...</p>

              <p>Avec une API REST bien con√ßue, la logique m√©tier est d√©velopp√©e une seule fois dans le langage de choix (disons Node.js). Cette API unique sert ensuite tous les clients. L'application iOS appelle /api/v1/restaurants, l'application Android appelle le m√™me endpoint, le site web aussi. Un seul backend pour tous les gouverner.</p>

              <h5>üîÑ Deuxi√®me avantage : la r√©utilisabilit√© et l'√©conomie des APIs</h5>
              <p>Imaginons un d√©veloppeur qui souhaite cr√©er une application de livraison de courses. Il a besoin de plusieurs fonctionnalit√©s : afficher des cartes pour la g√©olocalisation, envoyer des SMS pour notifier les clients, traiter les paiements, envoyer des emails de confirmation. Sans APIs externes, il devrait cr√©er toutes ces fonctionnalit√©s lui-m√™me, avec des ann√©es d'exp√©rience dans chaque domaine.</p>

              <p>Gr√¢ce aux web services, il peut utiliser l'API Google Maps pour la cartographie, l'API Twilio pour les SMS, l'API Stripe pour les paiements, l'API SendGrid pour les emails. Chaque service est fourni par des experts du domaine. Le d√©veloppeur peut se concentrer sur sa valeur ajout√©e r√©elle : la logique m√©tier de la livraison de courses.</p>

              <div class="highlight-box">
                <h6>üí° Anecdote Amazon : Le M√©mo de Bezos</h6>
                <p>En 2006, Jeff Bezos a envoy√© un m√©mo √† tous les ing√©nieurs d'Amazon. Le message √©tait clair et non n√©gociable : "√Ä partir de maintenant, toutes les √©quipes doivent exposer leurs fonctionnalit√©s via des APIs. Plus aucun acc√®s direct aux bases de donn√©es entre √©quipes. Pas de partage de m√©moire. Rien. Uniquement des APIs. Et ces APIs doivent √™tre con√ßues comme si elles allaient √™tre expos√©es publiquement, m√™me si ce n'est pas le cas initialement."</p>
                <p>Quelques ann√©es plus tard, Amazon a lanc√© Amazon Web Services (AWS). Comment ont-ils pu d√©ployer des dizaines de services cloud aussi rapidement ? Parce que toutes les briques technologiques existaient d√©j√† sous forme d'APIs internes. Il suffisait de les documenter proprement, d'ajouter une couche de facturation, et de les ouvrir au public. Aujourd'hui, AWS g√©n√®re plus de 80 milliards de dollars de revenus annuels.</p>
              </div>

              <h5>üìà Troisi√®me avantage : la scalabilit√© et l'√©volution</h5>
              <p>Imaginons Netflix au moment de passer du DVD par la poste au streaming vid√©o. Leur application monolithique ne pouvait pas g√©rer des millions d'utilisateurs simultan√©s regardant des vid√©os en haute d√©finition. Leur solution a √©t√© radicale : d√©couper leur application en centaines de microservices, chacun communiquant via des APIs bien d√©finies.</p>

              <p>Aujourd'hui, plus de 1000 microservices diff√©rents collaborent pour vous permettre de regarder vos s√©ries pr√©f√©r√©es. Certains g√®rent votre profil utilisateur, d'autres g√©n√®rent les recommandations personnalis√©es, d'autres transcodent les vid√©os dans diff√©rentes qualit√©s, d'autres g√®rent les abonnements et la facturation. Le jour du lancement d'une saison tr√®s attendue d'une s√©rie populaire, Netflix peut multiplier par 10 les instances du service de streaming vid√©o sans toucher aux autres services.</p>

              <h4 class="mt-5"><i class="fas fa-language"></i> Les diff√©rentes familles de Web Services</h4>
              
              <p>Comparons les diff√©rents types de web services √† des langues humaines, chacune avec sa philosophie et ses cas d'usage.</p>

              <h5>üåê SOAP : L'allemand des web services</h5>
              <p>SOAP est comme l'allemand : tr√®s structur√©, tr√®s formel, avec des r√®gles grammaticales pr√©cises. Quand on lit un document SOAP, on sait imm√©diatement de quoi il s'agit car tout est explicitement d√©crit. C'est verbeux, √ßa prend de la place, mais c'est extr√™mement rigoureux.</p>

              <p>Imaginons une banque internationale qui doit transf√©rer 10 millions d'euros entre deux syst√®mes bancaires situ√©s dans des pays diff√©rents. Elle veut des garanties absolues : la transaction doit √™tre s√©curis√©e avec signatures num√©riques (WS-Security), fiable avec gestion des erreurs et retry automatiques (WS-ReliableMessaging), transactionnelle avec possibilit√© de rollback (WS-Transaction). SOAP fournit des standards pour tout √ßa. C'est lourd, c'est complexe, mais quand il s'agit de millions d'euros, on ne plaisante pas avec la robustesse.</p>

              <h5>üåç REST : L'anglais des web services</h5>
              <p>REST est comme l'anglais : simple, pragmatique, flexible, et tout le monde le comprend. REST n'est pas vraiment un protocole rigide, c'est plut√¥t un ensemble de principes architecturaux. On utilise les verbes HTTP naturels (GET pour r√©cup√©rer, POST pour cr√©er, PUT pour modifier, DELETE pour supprimer) et des URLs pour identifier les ressources. C'est √©l√©gant, intuitif, et extr√™mement flexible.</p>

              <p>Imaginons une startup qui lance une API pour partager des photos. Avec REST, les endpoints sont √©vidents : GET /photos pour lister les photos, POST /photos pour en ajouter une, GET /photos/123 pour en voir une sp√©cifique, DELETE /photos/123 pour la supprimer. Tout d√©veloppeur comprend imm√©diatement comment √ßa fonctionne, m√™me sans lire la documentation.</p>

              <h5>üîÆ GraphQL : L'esp√©ranto des web services</h5>
              <p>GraphQL, c'est un peu l'esp√©ranto : une langue construite pour √™tre logique et efficace. L'id√©e centrale est brillante : au lieu que le serveur d√©cide quelles donn√©es vous renvoyer, c'est vous, le client, qui sp√©cifiez exactement ce dont vous avez besoin.</p>

              <p>Imaginons le d√©veloppement d'un r√©seau social. Pour afficher une page de profil, vous avez besoin du nom de l'utilisateur, sa photo de profil, et ses 10 derniers posts avec le nombre de likes. Avec REST, vous appelez GET /users/123 et r√©cup√©rez peut-√™tre 50 champs (adresse, t√©l√©phone, pr√©f√©rences, etc.) alors que vous n'en voulez que 5. Ensuite, vous appelez GET /users/123/posts et r√©cup√©rez tous les champs de tous les posts. C'est du gaspillage de bande passante.</p>

              <p>Avec GraphQL, vous √©crivez une seule query qui dit pr√©cis√©ment : "Pour l'utilisateur 123, je veux son nom, sa photo, et les titres de ses 10 derniers posts avec leur nombre de likes". Une seule requ√™te, exactement les donn√©es n√©cessaires. GitHub a migr√© son API vers GraphQL et a constat√© une r√©duction de 40% de la quantit√© de donn√©es transf√©r√©es.</p>

              <h5>‚ö° gRPC : Le mandarin des web services</h5>
              <p>gRPC, c'est le mandarin : tr√®s efficace quand on le ma√Ætrise, mais avec une courbe d'apprentissage raide. gRPC utilise Protocol Buffers, un format binaire d√©velopp√© par Google, plut√¥t que du texte comme JSON ou XML. R√©sultat : c'est 5 √† 10 fois plus rapide que REST. C'est bidirectionnel gr√¢ce √† HTTP/2, ce qui permet du streaming dans les deux sens.</p>

              <p>Imaginons Uber qui doit g√©rer la communication en temps r√©el entre les smartphones des chauffeurs et leurs serveurs. La position du v√©hicule doit √™tre mise √† jour toutes les secondes, les demandes de courses doivent arriver instantan√©ment, le tout avec une latence minimale. gRPC excelle dans ce type de sc√©nario. Mais gRPC est moins accessible : on ne peut pas simplement tester un appel gRPC dans un navigateur web comme on le ferait avec REST.</p>

              <div class="highlight-box">
                <h6>üéØ Dans ce cours</h6>
                <p>Nous allons nous concentrer principalement sur REST, pour trois raisons :</p>
                <ul>
                  <li>C'est de loin le plus utilis√© : environ 80% des APIs publiques sont en REST</li>
                  <li>Les concepts appris avec REST sont transf√©rables. Si vous comprenez bien REST, apprendre GraphQL ou gRPC sera beaucoup plus facile</li>
                  <li>REST est parfait pour l'apprentissage car il est transparent : on peut voir exactement ce qui se passe, d√©boguer facilement, tester manuellement</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="day-card expanded">
          <div class="day-header">
            <span class="day-number">2</span>
            <span class="day-theme">Architecture Client-Serveur et HTTP</span>
          </div>
          <div class="day-content">
            <div class="day-morning">
              <h4><i class="fas fa-server"></i> Le mod√®le client-serveur</h4>
              <p>Le mod√®le client-serveur fonctionne comme un restaurant bien organis√©. Imaginons que vous entrez dans un restaurant. Vous √™tes le client, vous consultez le menu (le contrat), vous appelez le serveur (qui joue le r√¥le d'interm√©diaire) et vous passez une commande : "Un steak frites, s'il vous pla√Æt". Le serveur note votre commande, va en cuisine, transmet l'information au chef, attend que le plat soit pr√™t, puis revient avec votre assiette.</p>

              <p>Vous ne rentrez pas en cuisine pour cuisiner vous-m√™me. Vous ne connaissez pas les recettes exactes. Vous ne savez pas o√π sont stock√©s les ingr√©dients. Vous n'avez m√™me pas besoin de savoir comment le chef s'organise. Tout ce que vous devez faire, c'est passer une commande claire selon le format du menu, et faire confiance au restaurant pour livrer ce que vous avez demand√©.</p>

              <p>C'est exactement comme √ßa que fonctionne le web. Votre navigateur (ou votre application mobile) est le client. Il envoie des requ√™tes : "donne-moi la page d'accueil de Google", "enregistre ce nouveau post Instagram", "r√©cup√®re mes derniers emails". Le serveur re√ßoit ces requ√™tes, ex√©cute les op√©rations n√©cessaires ‚Äì peut-√™tre interroger une base de donn√©es, faire des calculs complexes, appeler d'autres services ‚Äì et renvoie une r√©ponse.</p>

              <div class="highlight-box">
                <h6>üí° S√©paration des Responsabilit√©s</h6>
                <p>Ce qui est brillant dans ce mod√®le, c'est la s√©paration des responsabilit√©s. Le client n'a pas besoin de savoir comment le serveur fait son travail. Le serveur n'a pas besoin de savoir comment le client va utiliser les donn√©es ni comment il va les afficher. Cette s√©paration permet une flexibilit√© extraordinaire.</p>
                <p>Vous pouvez changer compl√®tement votre interface utilisateur, passer d'Angular √† React, redesigner toute l'exp√©rience mobile, sans toucher une seule ligne de code du serveur. De l'autre c√¥t√©, vous pouvez optimiser votre serveur, le r√©√©crire compl√®tement dans un autre langage, migrer votre base de donn√©es, tant qu'il r√©pond toujours de la m√™me mani√®re aux m√™mes requ√™tes, les clients n'y verront que du feu.</p>
              </div>

              <h4 class="mt-5"><i class="fas fa-globe"></i> Le protocole HTTP</h4>
              
              <p>HTTP, ou HyperText Transfer Protocol, c'est le protocole qui fait tourner le web depuis 1991. Quand Tim Berners-Lee a cr√©√© le web au CERN, il aurait pu concevoir un protocole binaire complexe, optimis√© pour la performance et l'efficacit√©. Au lieu de √ßa, il a fait un choix radical pour l'√©poque : cr√©er un protocole bas√© sur du texte brut, lisible par l'homme. Cette d√©cision, qui semblait na√Øve √† certains ing√©nieurs de l'√©poque, a en r√©alit√© chang√© l'histoire de l'informatique. Gr√¢ce √† cette lisibilit√©, n'importe quel d√©veloppeur peut comprendre ce qui se passe, d√©boguer facilement, et m√™me √©crire des requ√™tes HTTP √† la main si n√©cessaire.</p>

              <h5>üìù Structure d'une Requ√™te HTTP</h5>
              <p>Regardons √† quoi ressemble une vraie requ√™te HTTP. Imaginons une application web o√π un utilisateur remplit un formulaire d'inscription pour cr√©er un nouveau compte. Quand il clique sur "S'inscrire", le navigateur va envoyer quelque chose comme √ßa au serveur :</p>

              <div class="highlight-box">
                <h6>Exemple de Requ√™te HTTP</h6>
                <pre><code>POST /api/v1/users HTTP/1.1
Host: api.example.com
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
Accept: application/json
Content-Length: 98

{
  "name": "Marie Dubois",
  "email": "marie.dubois@example.com",
  "password": "SecureP@ssw0rd"
}</code></pre>
              </div>

              <p>D√©cortiquons chaque partie de cette requ√™te car elles ont toutes leur importance.</p>

              <h5>üîç D√©cortiquons la Requ√™te</h5>
              <ul>
                <li><strong>Ligne de requ√™te</strong> : POST /api/v1/users HTTP/1.1 - m√©thode, chemin, version</li>
                <li><strong>Headers</strong> : M√©tadonn√©es sur la requ√™te (Host, Content-Type, Authorization, etc.)</li>
                <li><strong>Body</strong> : Les donn√©es envoy√©es au serveur (apr√®s la ligne vide)</li>
              </ul>

              <h5>üì® Structure d'une R√©ponse HTTP</h5>
              <p>Maintenant, imaginons que le serveur re√ßoit cette requ√™te, v√©rifie que l'email n'est pas d√©j√† utilis√©, cr√©e l'utilisateur dans sa base de donn√©es, et renvoie une r√©ponse :</p>

              <div class="highlight-box">
                <h6>Exemple de R√©ponse HTTP</h6>
                <pre><code>HTTP/1.1 201 Created
Content-Type: application/json
Location: /api/v1/users/550e8400-e29b-41d4-a716-446655440000
Date: Fri, 24 Oct 2025 14:30:00 GMT
Content-Length: 156

{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Marie Dubois",
  "email": "marie.dubois@example.com",
  "createdAt": "2025-10-24T14:30:00Z"
}</code></pre>
              </div>

              <p>La premi√®re ligne de la r√©ponse, HTTP/1.1 201 Created, contient le code de statut. Le code 201 signifie "Created" ‚Äì la ressource a √©t√© cr√©√©e avec succ√®s. Le header Location est particuli√®rement int√©ressant et illustre une bonne pratique REST. Il indique l'URL compl√®te o√π le client peut maintenant acc√©der √† la ressource qui vient d'√™tre cr√©√©e.</p>

              <div class="highlight-box">
                <h6>üí° Anecdote sur le Caching HTTP</h6>
                <p>Dans les ann√©es 90, quand le web a commenc√© √† exploser, les serveurs √©taient rapidement submerg√©s. Les ing√©nieurs ont r√©alis√© qu'√©norm√©ment de bande passante √©tait gaspill√©e √† renvoyer les m√™mes ressources encore et encore. Une image de logo qui ne change jamais √©tait t√©l√©charg√©e des milliers de fois par les m√™mes utilisateurs. C'est l√† qu'ils ont invent√© le syst√®me de caching HTTP. L'id√©e √©tait simple mais g√©niale : le serveur peut dire au client "cette image ne changera pas avant demain √† minuit, garde-la en cache sur ton disque dur". La prochaine fois que le client a besoin de cette image, il utilise sa copie locale plut√¥t que de la re-t√©l√©charger. Simple, √©l√©gant, et √ßa a litt√©ralement permis au web de scaler √† l'√©chelle mondiale.</p>
              </div>

              <h4 class="mt-5"><i class="fas fa-keyboard"></i> Les m√©thodes HTTP : le vocabulaire des APIs</h4>
              
              <p>Les m√©thodes HTTP sont comme les verbes dans une phrase. Elles indiquent l'action que vous voulez effectuer sur une ressource. Il en existe plusieurs, mais cinq sont absolument essentielles pour cr√©er des APIs RESTful : GET, POST, PUT, PATCH et DELETE.</p>

              <h5>üìñ GET - R√©cup√©rer une ressource</h5>
              <p>GET est probablement la m√©thode que vous utilisez le plus souvent, m√™me si vous ne vous en rendez pas compte. Chaque fois que vous tapez une URL dans votre navigateur et que vous appuyez sur Entr√©e, vous faites un GET. Chaque fois que vous cliquez sur un lien hypertexte, c'est un GET. GET signifie "r√©cup√®re-moi cette ressource".</p>

              <p>L'important avec GET, c'est qu'il ne doit jamais, jamais modifier quoi que ce soit sur le serveur. GET est ce qu'on appelle une m√©thode "safe" (s√ªre). Vous pouvez faire le m√™me GET mille fois de suite, le r√©sultat sera toujours identique, et surtout, l'√©tat du serveur ne changera pas.</p>

              <div class="highlight-box">
                <h6>Exemples d'utilisation de GET</h6>
                <pre><code>GET /api/v1/products              # Liste tous les produits
GET /api/v1/products/789          # R√©cup√®re le produit 789
GET /api/v1/products?category=electronics&price_max=500  # Filtre</code></pre>
              </div>

              <div class="highlight-box">
                <h6>‚ùå Erreur Classique</h6>
                <p>Une erreur classique qu'on voit souvent chez les d√©butants : utiliser GET pour des actions. Par exemple, cr√©er un endpoint comme GET /api/v1/users/123/delete. C'est une tr√®s mauvaise id√©e. Pourquoi ? Parce que GET ne devrait jamais supprimer quoi que ce soit. Imaginez qu'un moteur de recherche comme Google d√©couvre votre API et qu'un crawler automatique suit ce lien... Boom, votre utilisateur 123 est supprim√©. Utilisez toujours la m√©thode appropri√©e pour l'action appropri√©e.</p>
              </div>

              <h5>‚ûï POST - Cr√©er une nouvelle ressource</h5>
              <p>POST est la m√©thode pour cr√©er de nouvelles ressources. Quand vous remplissez un formulaire d'inscription sur un site web et que vous cliquez sur le bouton "S'inscrire", votre navigateur fait un POST. Quand vous publiez un tweet, c'est un POST. Quand vous ajoutez un produit √† votre panier en ligne, POST.</p>

              <p>POST n'est ni safe ni idempotent. Si vous faites POST deux fois avec exactement les m√™mes donn√©es, vous cr√©erez deux ressources diff√©rentes (deux comptes utilisateur distincts, deux tweets identiques, etc.).</p>

              <div class="highlight-box">
                <h6>Exemple d'utilisation de POST</h6>
                <pre><code>POST /api/v1/products
Content-Type: application/json

{
  "name": "iPhone 15 Pro",
  "price": 1199.99,
  "category": "electronics",
  "stock": 50
}</code></pre>
              </div>

              <h5>üîÑ PUT - Remplacer compl√®tement une ressource</h5>
              <p>PUT est utilis√© pour la mise √† jour compl√®te d'une ressource existante. La diff√©rence subtile mais importante avec POST, c'est que PUT est idempotent. Si vous faites PUT plusieurs fois avec exactement les m√™mes donn√©es, le r√©sultat final sera identique √† si vous l'aviez fait une seule fois.</p>

              <p>Avec PUT, vous remplacez compl√®tement la ressource. Tous les champs doivent √™tre fournis dans la requ√™te.</p>

              <div class="highlight-box">
                <h6>Exemple d'utilisation de PUT</h6>
                <pre><code>PUT /api/v1/products/789
Content-Type: application/json

{
  "name": "iPhone 15 Pro Max",
  "price": 1299.99,
  "category": "electronics",
  "stock": 30,
  "description": "Dernier mod√®le avec √©cran Retina"
}</code></pre>
              </div>

              <h5>‚úèÔ∏è PATCH - Mise √† jour partielle</h5>
              <p>PATCH est une addition relativement r√©cente aux m√©thodes HTTP couramment utilis√©es, mais elle est devenue essentielle. Avec PATCH, vous ne sp√©cifiez que les champs que vous voulez modifier. Les autres champs restent intacts.</p>

              <div class="highlight-box">
                <h6>Exemple d'utilisation de PATCH</h6>
                <pre><code>PATCH /api/v1/products/789
Content-Type: application/json

{
  "price": 1099.99,
  "stock": 25
}</code></pre>
                <p>Seuls le prix et le stock sont modifi√©s. Le nom, la cat√©gorie, la description restent inchang√©s.</p>
              </div>

              <h5>üóëÔ∏è DELETE - Supprimer une ressource</h5>
              <p>DELETE fait exactement ce que son nom indique : supprimer une ressource. Simple et efficace.</p>

              <div class="highlight-box">
                <h6>Exemple d'utilisation de DELETE</h6>
                <pre><code>DELETE /api/v1/products/789</code></pre>
                <p>Le serveur supprime le produit 789 et r√©pond g√©n√©ralement avec un code 204 No Content (succ√®s, mais pas de contenu √† renvoyer) ou 200 OK avec un message de confirmation.</p>
              </div>

              <h5>üîß HEAD et OPTIONS - Les m√©thodes auxiliaires</h5>
              <p>Deux autres m√©thodes m√©ritent d'√™tre mentionn√©es, m√™me si elles sont moins utilis√©es au quotidien.</p>

              <p><strong>HEAD</strong> est exactement comme GET, sauf que le serveur ne renvoie que les headers, pas le body. Imaginons que vous voulez v√©rifier si un tr√®s gros fichier existe ou conna√Ætre sa taille avant de le t√©l√©charger. Avec HEAD, vous obtenez ces informations sans gaspiller de bande passante √† t√©l√©charger tout le fichier.</p>

              <p><strong>OPTIONS</strong> permet au client de d√©couvrir quelles m√©thodes HTTP sont support√©es sur un endpoint particulier. Le serveur r√©pond avec un header Allow listant les m√©thodes disponibles.</p>

              <div class="highlight-box">
                <h6>Exemple d'utilisation d'OPTIONS</h6>
                <pre><code>OPTIONS /api/v1/products/789

R√©ponse:
Allow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS</code></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="day-card expanded mt-4">
          <div class="day-header">
            <span class="day-number">3</span>
            <span class="day-theme">S√©mantique HTTP, Idempotence, Codes de statut</span>
          </div>
          <div class="day-content">
            <div class="day-afternoon">
              <h4><i class="fas fa-sitemap"></i> Verbes HTTP (liste d√©taill√©e)</h4>
              <p>
                HTTP n‚Äôest pas une simple tuyauterie: sa <strong>s√©mantique</strong> encode des promesses. <em>GET</em> dit ‚Äúje ne
                modifie rien‚Äù, <em>PUT</em> dit ‚Äúsi tu recommences, tu obtiens le m√™me √©tat‚Äù, <em>POST</em> dit ‚Äúje d√©clenche une
                action, possiblement cr√©atrice‚Äù. Respecter ces promesses rend votre API composable avec proxies,
                caches, et outils.
              </p>
              <ul>
                <li><strong>GET</strong> ‚Äî Lecture, <em>s√ªr</em> et <em>idempotent</em>. Jamais d‚Äôeffets de bord. Peut √™tre mis en cache.</li>
                <li><strong>HEAD</strong> ‚Äî Comme GET mais sans corps. Utile pour tester la disponibilit√©/metadata.</li>
                <li><strong>POST</strong> ‚Äî Cr√©ation/commande, <em>non idempotent</em>. R√©pondre <code>201 Created</code> + <code>Location</code>.</li>
                <li><strong>PUT</strong> ‚Äî Remplacement complet, <em>idempotent</em>. Rejouable sans surprendre le client.</li>
                <li><strong>PATCH</strong> ‚Äî Modification partielle. D√©finissez le format (JSON Patch/Merge Patch).</li>
                <li><strong>DELETE</strong> ‚Äî Suppression, <em>idempotent</em>. <code>204 No Content</code> recommand√©.</li>
                <li><strong>OPTIONS</strong> ‚Äî D√©couverte des capacit√©s, souvent pour CORS (pr√©‚Äërequ√™tes).</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-clone"></i> Idempotence</h4>
              <p>
                Imaginez un formulaire de paiement soumis deux fois apr√®s un rafra√Æchissement. Si votre <em>POST</em> n‚Äôest
                pas prot√©g√©, deux transactions partent. Les plateformes de paiement imposent une cl√© d‚Äôidempotence
                pour ‚Äúd√©‚Äëdupliquer‚Äù les tentatives. M√™me logique pour un <em>PUT</em>: r√©p√©ter l‚Äôop√©ration maintient l‚Äô√©tat.
                Cette propri√©t√© rend votre API beaucoup plus s√ªre face aux al√©as r√©seau et aux retries automatiques.
              </p>

              <h4 class="mt-4"><i class="fas fa-traffic-light"></i> Les codes de statut HTTP : apprendre √† parler au client</h4>
              <p>Les codes de statut HTTP sont organis√©s en cinq familles, et cette organisation n'est pas du tout al√©atoire. Chaque famille a une signification claire qui aide √† comprendre imm√©diatement ce qui s'est pass√©.</p>

              <h5>üìä Famille 1xx - Informationnel (rare)</h5>
              <p>Les codes 1xx sont informationnels et vous les rencontrerez rarement. Le plus connu est 100 Continue, utilis√© dans un pattern d'optimisation sp√©cifique. Imaginons que vous voulez uploader un fichier de 2 Go vers un serveur. Avant d'envoyer tout ce fichier, votre client peut demander "puis-je envoyer ce gros fichier ?" avec un header Expect: 100-continue. Si le serveur r√©pond 100 Continue, vous envoyez le fichier. Si le serveur r√©pond 401 Unauthorized ou 413 Payload Too Large, vous √©conomisez 2 GB de bande passante.</p>

              <h5>‚úÖ Famille 2xx - Succ√®s</h5>
              <p>Les codes 2xx signifient que la requ√™te a √©t√© trait√©e avec succ√®s. C'est la famille heureuse des codes de statut.</p>

              <ul>
                <li><strong>200 OK</strong> est le plus commun : "J'ai bien trait√© ta requ√™te et voil√† le r√©sultat". C'est le code par d√©faut pour une op√©ration r√©ussie.</li>
                <li><strong>201 Created</strong> signifie "J'ai cr√©√© la ressource que tu m'as demand√© de cr√©er". Utilis√© typiquement en r√©ponse √† POST. Devrait id√©alement inclure un header Location pointant vers la nouvelle ressource.</li>
                <li><strong>204 No Content</strong> est int√©ressant : "J'ai bien trait√© ta requ√™te, mais je n'ai rien √† te renvoyer". Souvent utilis√© pour DELETE ou pour des mises √† jour o√π le client n'a pas besoin de r√©cup√©rer la ressource modifi√©e.</li>
              </ul>

              <div class="highlight-box">
                <h6>üí° Anecdote r√©v√©latrice</h6>
                <p>Imaginons un d√©veloppeur junior qui cr√©e son premi√®re API. Il fait en sorte que tous les endpoints renvoient toujours 200 OK, m√™me en cas d'erreur. Son raisonnement ? "La requ√™te HTTP s'est bien pass√©e techniquement, donc c'est un succ√®s". Le probl√®me devient apparent tr√®s vite : son client front-end affiche toujours "Op√©ration r√©ussie avec succ√®s !", m√™me quand l'utilisateur qu'on essaie de cr√©er existe d√©j√†, m√™me quand le mot de passe est incorrect, m√™me quand la base de donn√©es est hors ligne. R√©sultat : confusion totale des utilisateurs et cauchemar de debugging. Il faut tout refactoriser pour utiliser les bons codes de statut. Les codes de statut ne parlent pas du succ√®s de la transmission HTTP en tant que telle, mais du succ√®s de l'op√©ration m√©tier demand√©e.</p>
              </div>

              <h5>üîÑ Famille 3xx - Redirection</h5>
              <p>Les codes 3xx concernent les redirections. Ils indiquent que le client doit effectuer une action suppl√©mentaire pour compl√©ter sa requ√™te.</p>

              <ul>
                <li><strong>301 Moved Permanently</strong> signifie "Cette ressource a d√©m√©nag√© de fa√ßon permanente, utilise d√©sormais cette nouvelle URL". Les navigateurs et moteurs de recherche mettent √† jour leurs liens. Utilis√© lors de refonte de sites web ou de r√©organisation d'APIs.</li>
                <li><strong>302 Found</strong> (ou 307 Temporary Redirect en HTTP/1.1) signifie "La ressource est temporairement √† une autre URL, mais continue d'utiliser l'URL originale √† l'avenir". Utilis√© pour les maintenances temporaires.</li>
                <li><strong>304 Not Modified</strong> est crucial pour le caching. Imaginons un client qui a une copie d'une ressource et veut savoir si elle est toujours √† jour. Il fait une requ√™te GET avec un header If-Modified-Since: Tue, 15 Oct 2025 10:00:00 GMT. Si la ressource n'a pas chang√© depuis cette date, le serveur r√©pond 304 Not Modified sans body, √©conomisant √©norm√©ment de bande passante.</li>
              </ul>

              <h5>‚ùå Famille 4xx - Erreur client</h5>
              <p>Les codes 4xx indiquent une erreur du c√¥t√© du client. C'est lui qui a fait quelque chose de mal dans sa requ√™te. Le serveur, lui, fonctionne correctement.</p>

              <ul>
                <li><strong>400 Bad Request</strong> signifie "Ta requ√™te est malform√©e, je ne peux m√™me pas la comprendre". Utilis√© quand le JSON est invalide, quand des param√®tres obligatoires manquent, quand le format ne correspond pas √† ce qui est attendu.</li>
                <li><strong>401 Unauthorized</strong> (nom historiquement tr√®s mauvais, devrait √™tre "Unauthenticated") signifie "Tu n'es pas authentifi√©, je ne sais pas qui tu es". Le client doit fournir des credentials valides. C'est la r√©ponse appropri√©e quand un token d'authentification est manquant ou invalide.</li>
                <li><strong>403 Forbidden</strong> signifie "Je sais parfaitement qui tu es gr√¢ce √† ton authentification, mais tu n'as pas le droit de faire cette action". Imaginons un utilisateur normal qui essaie de supprimer un compte administrateur. Il est authentifi√© (pas de 401), mais il n'a pas la permission (403).</li>
                <li><strong>404 Not Found</strong> - tout le monde conna√Æt celui-l√† depuis les d√©buts du web. "La ressource que tu cherches n'existe pas". Important : 404 signifie que la ressource n'existe pas, pas que l'endpoint est invalide. Si quelqu'un appelle GET /api/v1/users/999 et que l'utilisateur 999 n'existe pas, c'est un 404. Si quelqu'un appelle GET /api/v1/inexistant, c'est aussi un 404, mais id√©alement on pourrait m√™me renvoyer 400 ou cr√©er une page d'aide.</li>
                <li><strong>422 Unprocessable Entity</strong> est souvent mal compris. Il signifie "Ta requ√™te est syntaxiquement correcte, mais s√©mantiquement incorrecte". Imaginons que vous envoyez du JSON parfaitement valide pour cr√©er un utilisateur (pas de 400), mais l'email est d√©j√† utilis√© par un autre compte. La requ√™te est bien form√©e, mais vous ne pouvez pas la traiter pour des raisons m√©tier. C'est un 422.</li>
                <li><strong>429 Too Many Requests</strong> signifie "Tu fais trop de requ√™tes, ralentis". Utilis√© par les syst√®mes de rate limiting. Devrait inclure un header Retry-After indiquant quand le client peut r√©essayer.</li>
              </ul>

              <h5>üî• Famille 5xx - Erreur serveur</h5>
              <p>Les codes 5xx indiquent que le serveur a rencontr√© un probl√®me. Le client a fait une requ√™te valide, mais le serveur n'a pas pu la traiter. C'est la faute du serveur, pas du client.</p>

              <ul>
                <li><strong>500 Internal Server Error</strong> est le code d'erreur g√©n√©rique : "Quelque chose a plant√© de mon c√¥t√©, mais je ne peux pas (ou ne veux pas) te dire quoi exactement". C'est souvent le r√©sultat d'une exception non g√©r√©e dans le code. Dans les logs serveur, vous trouverez la vraie cause (division par z√©ro, null pointer, base de donn√©es inaccessible...), mais le client re√ßoit juste un 500.</li>
                <li><strong>502 Bad Gateway</strong> signifie "Je suis un proxy ou une API gateway, et le serveur derri√®re moi a renvoy√© une r√©ponse invalide". Imaginons une architecture avec une API gateway devant plusieurs microservices. Si un microservice crash et renvoie du charabia, la gateway renvoie un 502 au client.</li>
                <li><strong>503 Service Unavailable</strong> signifie "Je suis temporairement indisponible (maintenance programm√©e, surcharge, probl√®me temporaire)". Devrait inclure un header Retry-After pour indiquer quand r√©essayer. Utilis√© √©galement quand toutes les workers threads sont occup√©es ou quand la base de donn√©es est en maintenance.</li>
                <li><strong>504 Gateway Timeout</strong> signifie "Je suis un proxy ou une gateway, et le serveur derri√®re moi n'a pas r√©pondu dans le d√©lai imparti". Imaginons que votre API gateway attend maximum 30 secondes une r√©ponse d'un microservice, mais celui-ci ne r√©pond pas. La gateway renvoie un 504 au client.</li>
              </ul>

              <div class="highlight-box">
                <h6>üéØ R√®gle d'or</h6>
                <p><strong>4xx = c'est la faute du client, 5xx = c'est la faute du serveur.</strong> Cette distinction est cruciale pour le debugging et le monitoring.</p>
              </div>

              <h4 class="mt-4"><i class="fas fa-exchange-alt"></i> N√©gociation de contenu (content‚Äënegotiation)</h4>
              <p>
                HTTP permet au client d‚Äôexprimer ce qu‚Äôil peut <em>accepter</em> et au serveur de r√©pondre en
                cons√©quence. Bien ma√Ætris√©e, la n√©gociation de contenu rend vos APIs plus souples (formats, langues,
                versions) sans multiplier les endpoints.
              </p>
              <ul>
                <li><strong>Accept</strong> ‚Äî Formats accept√©s par le client (ex: <code>application/json</code>, <code>application/xml</code>).</li>
                <li><strong>Content-Type</strong> ‚Äî Format du <em>corps envoy√©</em> par le client (sur POST/PUT/PATCH).</li>
                <li><strong>Accept-Language</strong> ‚Äî Langues pr√©f√©r√©es pour les messages (utile pour les erreurs/doc).</li>
                <li><strong>406 Not Acceptable</strong> ‚Äî Aucun format disponible ne correspond √† <code>Accept</code>.</li>
                <li><strong>415 Unsupported Media Type</strong> ‚Äî Le <code>Content-Type</code> re√ßu n‚Äôest pas support√©.</li>
              </ul>
              <pre><code># Le client demande JSON en entr√©e et sortie
curl -H "Accept: application/json" \
     -H "Content-Type: application/json" \
     -d '{"title":"Concert","date":"2025-05-20"}' \
     https://api.smartcity.dev/events

# R√©ponse 201 avec Location et repr√©sentation JSON
HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
Location: /events/42
              </code></pre>

              <div class="progression-note mt-4">
                <h4>Bonnes pratiques de n√©gociation</h4>
                <p>R√©pondez toujours avec un <code>Content-Type</code> explicite ‚Ä¢ Refusez les corps sans
                <code>Content-Type</code> (415) ‚Ä¢ Documentez clairement les formats support√©s et les langues ‚Ä¢ En cas de
                conflit, pr√©f√©rez la clart√© (406/415) plut√¥t que d‚Äôessayer de deviner.</p>
              </div>

              <h4 class="mt-4"><i class="fas fa-code-branch"></i> Versioning par m√©dia (option avanc√©e)</h4>
              <p>
                Au lieu d‚Äôencoder la version dans l‚ÄôURL (<code>/v1/</code>), vous pouvez utiliser des <em>media types</em>
                versionn√©s: <code>application/vnd.smartcity.event+json;v=1</code>. Le serveur produit la repr√©sentation
                conforme √† la version demand√©e, ce qui √©vite la duplication d‚ÄôURL et permet une migration douce.
              </p>
              <pre><code>Accept: application/vnd.smartcity.event+json;v=2
Content-Type: application/vnd.smartcity.event+json;v=2
              </code></pre>

              <div class="progression-note mt-4">
                <h4>Quand versionner ?</h4>
                <p>Versionnez seulement sur <em>breaking changes</em> (suppression/changement de s√©mantique). Pour des
                ajouts non destructifs, restez en v1. Pr√©parez une p√©riode de transition avec double production v1/v2.</p>
              </div>

              <h4 class="mt-4"><i class="fas fa-key"></i> Idempotency‚ÄëKey (POST s√©curis√©)</h4>
              <p>
                Les POST peuvent √™tre rendus <em>effectivement idempotents</em> c√¥t√© serveur en honorant une cl√©
                fournie par le client. √Ä requ√™te r√©p√©t√©e avec la m√™me cl√©, renvoyez la m√™me r√©ponse (ou un statut
                ad√©quat) au lieu de recr√©er une ressource.
              </p>
              <pre><code># C√¥t√© client
Idempotency-Key: 8d2e6d5a-a1f0-4d0b-9f8a-0a8c7c2e1c90

# C√¥t√© serveur (pseudo-code)
if (store.has(IdempotencyKey)) return store.get(IdempotencyKey)
const response = handlePost()
store.set(IdempotencyKey, response, ttl=24h)
return response
              </code></pre>
            </div>
          </div>
        </div>

        <div class="day-card expanded mt-4">
          <div class="day-header">
            <span class="day-number">4</span>
            <span class="day-theme">Formats d'√©change de donn√©es</span>
          </div>
          <div class="day-content">
            <div class="day-morning">
              <h4><i class="fas fa-code"></i> Pourquoi des formats structur√©s ?</h4>
              <p>Imaginons que vous devez transmettre les informations d'un utilisateur d'une application √† une autre. Vous pourriez simplement concat√©ner les valeurs : "John Doe|john@example.com|30|true". Mais cette approche pose imm√©diatement plusieurs probl√®mes. Comment le destinataire sait-il que le premier √©l√©ment est le nom, le deuxi√®me l'email, le troisi√®me l'√¢ge, le quatri√®me le statut actif ? Que se passe-t-il si le nom de l'utilisateur contient un pipe (|) ? Comment repr√©senter des structures plus complexes, comme l'adresse avec rue, ville et code postal ? Et si l'utilisateur n'a pas fourni son √¢ge, comment repr√©senter cette absence d'information ?</p>

              <p>C'est exactement pour r√©soudre ces probl√®mes que des formats structur√©s standardis√©s ont √©t√© cr√©√©s. Les deux principaux acteurs dans le monde des web services sont JSON et XML. Chacun a ses forces, ses faiblesses, et ses cas d'usage privil√©gi√©s.</p>

              <h4 class="mt-5"><i class="fas fa-file-code"></i> JSON - Le roi incontest√© du web moderne</h4>
              <p>JSON (JavaScript Object Notation) a √©t√© cr√©√© par Douglas Crockford au d√©but des ann√©es 2000. L'histoire de sa cr√©ation est amusante et illustre parfaitement comment les meilleures solutions sont souvent les plus simples. Crockford cherchait un format l√©ger pour √©changer des donn√©es entre du code JavaScript c√¥t√© client et le serveur. Il a propos√© JSON √† ses coll√®gues de travail qui ont r√©pondu : "C'est trop simple, √ßa ne marchera jamais pour des applications s√©rieuses". Crockford a persist√©, publi√© la sp√©cification, et aujourd'hui JSON a litt√©ralement mang√© le monde du web.</p>

              <h5>üìù Structure et syntaxe de base</h5>
              <p>Voici un exemple complet de donn√©es utilisateur en JSON :</p>

              <div class="highlight-box">
                <h6>Exemple JSON complet</h6>
                <pre><code>{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "Marie Dubois",
  "age": 28,
  "email": "marie.dubois@example.com",
  "isActive": true,
  "roles": ["user", "moderator", "contributor"],
  "address": {
    "street": "10 rue de la Paix",
    "city": "Paris",
    "zipCode": "75001",
    "country": "France"
  },
  "preferences": null,
  "lastLogin": "2025-10-24T14:30:00Z"
}</code></pre>
              </div>

              <p>JSON supporte six types de donn√©es fondamentaux. Les strings (cha√Ænes de caract√®res) sont entour√©es de guillemets doubles : "texte". Les numbers peuvent √™tre des entiers ou des d√©cimaux : 42, 3.14159, -17, 1.5e10. Les booleans s'√©crivent true ou false (en minuscules). Les arrays (tableaux) sont des listes entre crochets : [1, 2, 3] ou ["rouge", "vert", "bleu"]. Les objects sont des paires cl√©-valeur entre accolades : {"key": "value", "age": 30}. Et enfin null repr√©sente l'absence explicite de valeur.</p>

              <h5>üèÜ Pourquoi JSON a gagn√© la bataille des formats</h5>
              <p>Plusieurs raisons expliquent la domination absolue de JSON dans le monde des APIs modernes :</p>

              <ul>
                <li><strong>Simplicit√©</strong> : Un humain peut lire et comprendre du JSON sans formation particuli√®re</li>
                <li><strong>L√©g√®ret√©</strong> : JSON est beaucoup moins verbeux que XML ‚Äì pour les m√™mes donn√©es, un document JSON fait g√©n√©ralement 30 √† 50% de moins qu'un document XML √©quivalent</li>
                <li><strong>Natif JavaScript</strong> : JSON.parse() et JSON.stringify() sont int√©gr√©s au langage</li>
                <li><strong>Universalit√©</strong> : Tous les langages modernes ont des biblioth√®ques JSON performantes</li>
              </ul>

              <h5>‚úÖ Bonnes pratiques JSON</h5>
              <p><strong>Nommage coh√©rent</strong> : Choisissez une convention de nommage et tenez-vous-y dans toute votre API. En JavaScript, on utilise g√©n√©ralement camelCase : firstName, lastName, isActive. En Python et Ruby, on pr√©f√®re snake_case : first_name, last_name, is_active. Les deux sont valides, l'important est la coh√©rence.</p>

              <p><strong>Structure coh√©rente pour les collections</strong> : Quand vous renvoyez une liste d'√©l√©ments, enveloppez toujours le tableau dans un objet avec des m√©tadonn√©es utiles :</p>

              <div class="highlight-box">
                <h6>Exemple de structure coh√©rente</h6>
                <pre><code>{
  "data": [
    {"id": 1, "name": "Product A", "price": 29.99},
    {"id": 2, "name": "Product B", "price": 49.99}
  ],
  "page": 1,
  "limit": 20,
  "total": 156,
  "hasMore": true
}</code></pre>
              </div>

              <p><strong>Gestion des dates</strong> : Utilisez toujours le format ISO 8601 : "2025-10-24T14:30:00Z". Le T s√©pare la date de l'heure, le Z signifie UTC. N'utilisez jamais des formats ambigus comme "24/10/2025".</p>

              <h4 class="mt-5"><i class="fas fa-file-code"></i> XML - L'ancien champion toujours vivant</h4>
              <p>XML (eXtensible Markup Language) a domin√© le monde des web services dans les ann√©es 2000. Aujourd'hui, son utilisation a dramatiquement diminu√© dans les nouvelles APIs, mais il reste omnipr√©sent dans certains domaines : syst√®mes legacy des grandes entreprises, finance (standard SWIFT), sant√© (standard HL7), gouvernement, et dans tous les syst√®mes SOAP.</p>

              <div class="highlight-box">
                <h6>Exemple XML √©quivalent</h6>
                <pre><code><?xml version="1.0" encoding="UTF-8"?>
<user id="550e8400-e29b-41d4-a716-446655440000">
  <name>Marie Dubois</name>
  <age>28</age>
  <email>marie.dubois@example.com</email>
  <isActive>true</isActive>
  <roles>
    <role>user</role>
    <role>moderator</role>
    <role>contributor</role>
  </roles>
  <address>
    <street>10 rue de la Paix</street>
    <city>Paris</city>
    <zipCode>75001</zipCode>
    <country>France</country>
  </address>
  <preferences xsi:nil="true"/>
  <lastLogin>2025-10-24T14:30:00Z</lastLogin>
</user></code></pre>
              </div>

              <h5>‚öñÔ∏è Avantages de XML</h5>
              <p>XML a des atouts r√©els qui expliquent pourquoi il survit dans certains domaines :</p>
              <ul>
                <li><strong>Validation stricte</strong> : avec XSD (XML Schema Definition), vous pouvez d√©finir une structure extr√™mement pr√©cise et contrainte</li>
                <li><strong>Namespaces</strong> : permettent d'√©viter les conflits de noms quand vous combinez des donn√©es de diff√©rentes sources</li>
                <li><strong>Flexibilit√© attributs/√©l√©ments</strong> : vous pouvez mettre des donn√©es soit dans des attributs soit dans des √©l√©ments</li>
                <li><strong>Standards robustes</strong> : XPath pour requ√™ter, XSLT pour transformer, tout un √©cosyst√®me mature existe</li>
              </ul>

              <h5>‚ùå Pourquoi XML a perdu</h5>
              <p>Malgr√© ses qualit√©s ind√©niables, XML a √©t√© progressivement abandonn√© au profit de JSON pour plusieurs raisons concr√®tes :</p>

              <ul>
                <li><strong>Verbosit√© excessive</strong> : Pour les m√™mes donn√©es, un document XML fait presque le double d'un document JSON</li>
                <li><strong>Complexit√©</strong> : XSD, XSLT, XPath, namespaces... Pour un d√©veloppeur d√©butant, c'est intimidant</li>
                <li><strong>Lisibilit√©</strong> : JSON est plus compact et plus facile √† scanner visuellement</li>
                <li><strong>Timing</strong> : JSON est arriv√© au bon moment, quand JavaScript dominait c√¥t√© client</li>
              </ul>

              <div class="highlight-box">
                <h6>üí° Comparaison concr√®te</h6>
                <p><strong>JSON :</strong></p>
                <pre><code>{"name": "Marie", "age": 28, "city": "Paris"}</code></pre>
                <p><strong>XML :</strong></p>
                <pre><code><person>
  <name>Marie</name>
  <age>28</age>
  <city>Paris</city>
</person></code></pre>
                <p>JSON est plus compact et plus facile √† scanner visuellement. Quand vous debuggez une API √† 2h du matin, cette diff√©rence de lisibilit√© compte.</p>
              </div>

              <h4 class="mt-5"><i class="fas fa-balance-scale"></i> JSON vs XML : quand utiliser quoi ?</h4>
              <p>La d√©cision n'est pas toujours √©vidente, mais voici quelques lignes directrices pragmatiques :</p>

              <div class="highlight-box">
                <h6>üéØ Utilisez JSON si :</h6>
                <ul>
                  <li>Vous construisez une nouvelle API en 2025</li>
                  <li>La performance et la bande passante sont importantes</li>
                  <li>Vous travaillez principalement avec JavaScript ou des applications web/mobile modernes</li>
                  <li>Vous voulez quelque chose de simple que n'importe quel d√©veloppeur peut comprendre rapidement</li>
                </ul>
              </div>

              <div class="highlight-box">
                <h6>üéØ Utilisez XML si :</h6>
                <ul>
                  <li>Vous devez int√©grer avec des syst√®mes legacy existants qui ne parlent que XML</li>
                  <li>Vous travaillez dans un domaine fortement r√©glement√© (finance, sant√©, a√©rospatial) o√π des standards XML sont impos√©s</li>
                  <li>Vous avez besoin d'une validation de sch√©ma extr√™mement stricte et complexe</li>
                  <li>Le client l'exige contractuellement (et vous ne pouvez pas n√©gocier)</li>
                </ul>
              </div>

              <div class="highlight-box">
                <h6>üí° Anecdote r√©aliste</h6>
                <p>Imaginons une grande banque europ√©enne qui souhaite moderniser ses APIs. L'√©quipe technique est enthousiaste √† l'id√©e de passer de SOAP/XML √† REST/JSON. Apr√®s une analyse approfondie, ils d√©couvrent qu'ils ont 200 syst√®mes internes qui consomment ces APIs en XML, certains datant de 15 ans. Le co√ªt de migration de tous ces syst√®mes serait astronomique - plusieurs millions d'euros et plusieurs ann√©es de travail. Solution pragmatique : cr√©er une nouvelle API REST/JSON pour tous les nouveaux clients et projets, maintenir l'ancienne API SOAP/XML pour les syst√®mes internes legacy. Parfois, le pragmatisme l'emporte sur la modernit√© technologique.</p>
              </div>

              <h4 class="mt-5"><i class="fas fa-cogs"></i> Autres formats √† conna√Ætre</h4>
              <p>Le monde ne se limite pas √† JSON et XML. D'autres formats ont trouv√© leur niche :</p>

              <h5>‚ö° Protocol Buffers (Protobuf)</h5>
              <p>Protobuf est un format binaire d√©velopp√© par Google pour gRPC. Contrairement √† JSON et XML qui sont texte, Protobuf est binaire. Il est extr√™mement compact et tr√®s rapide √† parser.</p>

              <div class="highlight-box">
                <h6>Exemple Protobuf</h6>
                <pre><code>message User {
  string id = 1;
  string name = 2;
  int32 age = 3;
  string email = 4;
  repeated string roles = 5;
}</code></pre>
              </div>

              <p>Protobuf est utilis√© quand la performance est absolument critique : communications entre microservices internes, IoT avec bande passante limit√©e, applications de gaming temps r√©el. Inconv√©nient : pas lisible par l'homme, n√©cessite un compilateur pour g√©n√©rer du code.</p>

              <h5>üì¶ MessagePack</h5>
              <p>MessagePack est comme JSON mais en format binaire. Plus compact que JSON, plus rapide √† parser, tout en gardant une structure similaire. Redis l'utilise pour certaines op√©rations. Utile quand vous voulez les avantages de JSON mais avec de meilleures performances.</p>

              <h5>üìù YAML</h5>
              <p>YAML (YAML Ain't Markup Language) est super pour les fichiers de configuration (Docker Compose, Kubernetes, GitHub Actions), mais moins adapt√© pour les APIs. Il est lisible mais sensible √† l'indentation, ce qui cause souvent des bugs subtils.</p>

              <div class="highlight-box">
                <h6>Exemple YAML</h6>
                <pre><code>user:
  name: Marie Dubois
  age: 28
  roles:
    - user
    - moderator
  address:
    city: Paris
    country: France</code></pre>
              </div>

              <p>YAML est excellent pour la configuration, mais √©vitez-le pour les √©changes de donn√©es en production. Un espace en trop peut casser tout le parsing.</p>
            </div>
          </div>
        </div>

        <div class="day-card expanded mt-4">
          <div class="day-header">
            <span class="day-number">5</span>
            <span class="day-theme">Gestion d'erreurs standardis√©e (RFC 7807)</span>
          </div>
          <div class="day-content">
            <div class="day-morning">
              <h4><i class="fas fa-triangle-exclamation"></i> Problem Details</h4>
              <p>
                Avant la RFC 7807, chaque √©quipe inventait son propre format d‚Äôerreur: tant√¥t
                <code>{ error: "Bad things" }</code>, tant√¥t <code>{ message: "Nope" }</code>. R√©sultat: des clients robustes
                impossibles √† √©crire, et des parseurs pleins d‚Äô<em>if</em>. La RFC 7807 propose un langage commun pour dire
                ‚Äúce qui s‚Äôest mal pass√©‚Äù sans perdre d‚Äôinformation: <code>type</code> pour classer, <code>title</code> pour r√©sumer,
                <code>detail</code> pour expliquer, <code>status</code> pour refl√©ter HTTP, <code>instance</code> pour pointer l‚Äôoccurrence.
              </p>
              <pre><code>{
  "type": "https://smartcity.dev/problems/validation-error",
  "title": "Validation failed",
  "status": 422,
  "detail": "Payload is not valid",
  "instance": "/events",
  "errors": {
    "title": ["Required"],
    "date": ["Must be ISO 8601"]
  },
  "correlationId": "f8d9a1f3-1c2b-4a3e-8f0a-12ab34cd56ef"
}</code></pre>

              <p>
                L‚Äôastuce qui change tout en production est d‚Äôy ajouter un <strong>correlationId</strong> propag√© de bout en bout
                (gateway ‚Üí services ‚Üí logs ‚Üí r√©ponse). Quand un √©tudiant vous dit ‚Äú√ßa marche pas‚Äù, vous cherchez ce
                <code>correlationId</code> et vous rejouez l‚Äôhistoire exact de la requ√™te. C‚Äôest Sherlock Holmes int√©gr√©.
              </p>
              <div class="progression-note mt-4">
                <h4>Bonnes pratiques</h4>
                <p>Stabilisez vos URIs de <code>type</code>, localisez <code>title/detail</code>, logguez le <code>correlationId</code> c√¥t√© serveur et retournez‚Äële au client.</p>
              </div>

              <h4 class="mt-4"><i class="fas fa-code"></i> Mod√®le d‚Äôerreur versionn√©</h4>
              <p>
                Pour √©viter d‚Äô<em>enfermer</em> les clients dans un format fig√©, exposez des <strong>URIs de type</strong> stables
                (ex: <code>https://smartcity.dev/problems/validation-error</code>) dont la page d√©crit le probl√®me,
                les champs attendus et, si n√©cessaire, son √©volution au fil du temps. Ainsi, m√™me si vous ajoutez des
                champs d‚Äôextension demain, les int√©grateurs savent o√π trouver la v√©rit√©.
              </p>

              <h4 class="mt-4"><i class="fas fa-language"></i> Localisation et tra√ßabilit√©</h4>
              <ul>
                <li><strong>Localiser</strong> <code>title</code>/<code>detail</code> selon l‚Äôen‚Äët√™te <code>Accept-Language</code> quand c‚Äôest utile √† l‚ÄôUX.</li>
                <li><strong>Tra√ßabilit√©</strong>: attachez le <code>correlationId</code> aux logs structur√©s (JSON) avec le niveau et le contexte.</li>
                <li><strong>S√©curit√©</strong>: ne divulguez jamais d‚Äôimpl√©mentation interne; gardez un message public et un log d√©taill√©.</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-tags"></i> En‚Äët√™tes et m√©tadonn√©es utiles</h4>
              <ul>
                <li><code>Content-Type: application/problem+json</code> ‚Äî toujours pr√©sent pour un Problem Details.</li>
                <li><code>X-Correlation-Id</code> ‚Äî renvoyez le m√™me identifiant qu‚Äôen entr√©e (ou g√©n√©rez‚Äële).</li>
                <li><code>WWW-Authenticate</code> (401) ‚Äî indiquez le sch√©ma attendu (Bearer, realm‚Ä¶).</li>
                <li><code>Retry-After</code> (429, 503) ‚Äî d√©lai conseill√© avant une nouvelle tentative.</li>
                <li><code>ETag</code>/<code>If-Match</code> ‚Äî pour pr√©conditions et contr√¥le de concurrence (412).</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-globe"></i> Localisation ‚Äî patron conseill√©</h4>
              <p>
                Conservez c√¥t√© serveur des <em>cl√©s i18n</em> et servez des messages localis√©s selon <code>Accept-Language</code>.
                Vous pouvez exposer la cl√© en champ d‚Äôextension (utile aux clients qui souhaitent traduire eux‚Äëm√™mes).
              </p>
              <pre><code>{
  "type": "https://smartcity.dev/problems/validation-error",
  "title": "√âchec de validation",
  "detail": "Le champ 'date' doit √™tre au format ISO 8601.",
  "status": 422,
  "i18nKey": "errors.validation.date.invalid",
  "locale": "fr-FR",
  "correlationId": "c2c1f8..."
}</code></pre>

              <h4 class="mt-4"><i class="fas fa-stream"></i> Corr√©lation et traces</h4>
              <p>
                Utilisez un <code>X-Correlation-Id</code> stable pour relier requ√™te, logs et r√©ponse. Quand OpenTelemetry est
                pr√©sent, couplez‚Äële avec les ent√™tes W3C (<code>traceparent</code>, <code>tracestate</code>) afin de retrouver le chemin
                complet d‚Äôune requ√™te √† travers vos services.
              </p>
              <pre><code>// Express (pseudo‚Äëcode)
app.use((req, res, next) => {
  const id = req.header('x-correlation-id') || crypto.randomUUID()
  res.setHeader('x-correlation-id', id)
  req.correlationId = id
  next()
})

function problem(res, status, type, title, detail, extras = {}) {
  return res
    .status(status)
    .type('application/problem+json')
    .send({ type, title, status, detail, instance: res.req.path, correlationId: res.getHeader('x-correlation-id'), ...extras })
}
              </code></pre>

              <h4 class="mt-4"><i class="fas fa-shield-alt"></i> S√©curit√© et erreurs</h4>
              <p>
                Les erreurs sont un canal d‚Äô<em>exfiltration d‚Äôinformation</em>. Redigez des messages sobres, √©vitez de
                r√©v√©ler des cl√©s √©trang√®res, des chemins syst√®me, ou la stack exacte. Dans les r√©ponses publiques,
                un <code>detail</code> court; dans les logs internes, la v√©rit√© compl√®te.
              </p>

              <h4 class="mt-4"><i class="fas fa-link"></i> RFC 3986 ‚Äî Encodage d‚ÄôURL (percent‚Äëencoding)</h4>
              <p>
                Les URLs ob√©issent √† la RFC 3986. Les caract√®res <em>non r√©serv√©s</em> (A‚ÄìZ a‚Äìz 0‚Äì9 <code>-</code> <code>_</code> <code>.</code> <code>~</code>)
                peuvent appara√Ætre tels quels. Les <em>r√©serv√©s</em> ont une s√©mantique (s√©parateurs, op√©rateurs) et doivent
                √™tre encod√©s par <code>%HH</code> (hex) selon le contexte <em>chemin</em> vs <em>query</em>. Toujours encoder apr√®s conversion
                en UTF‚Äë8 pour les caract√®res hors ASCII.
              </p>

              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Caract√®re</th>
                      <th>Nom</th>
                      <th>Encodage %</th>
                      <th>Remarques</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td> </td><td>Espace</td><td>%20</td><td>En query, <code>+</code> est parfois accept√© mais pr√©f√©rez %20</td></tr>
                    <tr><td>!</td><td>Exclamation</td><td>%21</td><td>R√©serv√©</td></tr>
                    <tr><td>"</td><td>Guillemet</td><td>%22</td><td>√Ä encoder</td></tr>
                    <tr><td>#</td><td>Hash (fragment)</td><td>%23</td><td>S√©pare l‚Äôancre; encoder hors fragment</td></tr>
                    <tr><td>$</td><td>Dollar</td><td>%24</td><td>R√©serv√©</td></tr>
                    <tr><td>&</td><td>Ampersand</td><td>%26</td><td>S√©pare les param√®tres en query</td></tr>
                    <tr><td>'</td><td>Apostrophe</td><td>%27</td><td>√Ä encoder</td></tr>
                    <tr><td>(</td><td>Parenth√®se ouvrante</td><td>%28</td><td>√Ä encoder</td></tr>
                    <tr><td>)</td><td>Parenth√®se fermante</td><td>%29</td><td>√Ä encoder</td></tr>
                    <tr><td>*</td><td>Ast√©risque</td><td>%2A</td><td>R√©serv√©</td></tr>
                    <tr><td>+</td><td>Plus</td><td>%2B</td><td>En query, <code>+</code> peut signifier espace; encodez <code>%2B</code> si c‚Äôest un plus</td></tr>
                    <tr><td>,</td><td>Virgule</td><td>%2C</td><td>R√©serv√©</td></tr>
                    <tr><td>/</td><td>Slash</td><td>%2F</td><td>S√©parateur de chemin; encoder dans un segment si litt√©ral</td></tr>
                    <tr><td>:</td><td>Deux‚Äëpoints</td><td>%3A</td><td>S√©pare sch√©ma/host/port; encoder dans segments/params</td></tr>
                    <tr><td>;</td><td>Point‚Äëvirgule</td><td>%3B</td><td>R√©serv√©</td></tr>
                    <tr><td>=</td><td>√âgal</td><td>%3D</td><td>S√©pare cl√©/valeur en query</td></tr>
                    <tr><td>?</td><td>Point d‚Äôinterrogation</td><td>%3F</td><td>D√©marre la query string</td></tr>
                    <tr><td>@</td><td>Arobase</td><td>%40</td><td>Infos d‚Äôauth dans l‚Äôautorit√© (d√©conseill√©)</td></tr>
                    <tr><td>[</td><td>Crochet ouvrant</td><td>%5B</td><td>IPv6 dans l‚Äôh√¥te</td></tr>
                    <tr><td>]</td><td>Crochet fermant</td><td>%5D</td><td>IPv6 dans l‚Äôh√¥te</td></tr>
                    <tr><td>%</td><td>Pourcent</td><td>%25</td><td>Doit √™tre encod√© s‚Äôil n‚Äôintroduit pas un octet cod√©</td></tr>
                  </tbody>
                </table>
              </div>

              <h4 class="mt-4"><i class="fas fa-vial"></i> Exemples concrets</h4>
              <ul>
                <li>Segment de chemin litt√©ral: <code>/files/AC/DC</code> ‚Üí <code>/files/AC%2FDC</code></li>
                <li>Espace dans un nom: <code>/events/Paris 2025</code> ‚Üí <code>/events/Paris%202025</code></li>
                <li>Param√®tre ‚Äúq=a+b c‚Äù: <code>?q=a%2Bb%20c</code> (√©vitez d‚Äôutiliser <code>+</code> pour l‚Äôespace)</li>
                <li>Unicode: ‚ÄúToulouse üê¶‚Äù ‚Üí UTF‚Äë8 ‚Üí <code>Toulouse%20%F0%9F%90%A6</code></li>
              </ul>

              <div class="progression-note mt-4">
                <h4>Pi√®ges √† √©viter</h4>
                <p>Double encodage (<code>%252F</code> au lieu de <code>%2F</code>) ‚Ä¢ M√©langer encodage path/query ‚Ä¢ Utiliser <code>+</code> pour espace partout ‚Ä¢ Oublier UTF‚Äë8 avant encodage.</p>
              </div>
            </div>
          </div>
        </div>

        <div class="day-card expanded">
          <div class="day-header">
            <span class="day-number">6</span>
            <span class="day-theme">Panorama des classes 1xx, 2xx, 3xx, 4xx, 5xx</span>
          </div>
          <div class="day-content">
            <div class="day-morning">
              <h4><i class="fas fa-signal"></i> 1xx ‚Äî Information</h4>
              <ul>
                <li><strong>100 Continue</strong> ‚Äî Le serveur a re√ßu les en‚Äët√™tes, le client peut envoyer le corps (rare en APIs).</li>
                <li><strong>101 Switching Protocols</strong> ‚Äî Passage √† un autre protocole (ex: WebSocket).</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-check-circle"></i> 2xx ‚Äî Succ√®s</h4>
              <ul>
                <li><strong>200 OK</strong> ‚Äî R√©ponse ordinaire avec contenu.</li>
                <li><strong>201 Created</strong> ‚Äî Cr√©ation r√©ussie. Ajoutez <code>Location: /ressource/{id}</code>.</li>
                <li><strong>202 Accepted</strong> ‚Äî Traitement asynchrone accept√© (file, job). Fournir un endpoint de suivi.</li>
                <li><strong>204 No Content</strong> ‚Äî Succ√®s sans corps (souvent pour <em>DELETE</em> ou <em>PUT</em> sans retour).</li>
                <li><strong>206 Partial Content</strong> ‚Äî R√©ponse partielle (ent√™tes <code>Range</code>/<code>Content-Range</code>).</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-random"></i> 3xx ‚Äî Redirections</h4>
              <ul>
                <li><strong>301 Moved Permanently</strong> ‚Äî Redirection d√©finitive (GET/HEAD seulement conseill√©).</li>
                <li><strong>302 Found</strong> ‚Äî Redirection temporaire (historiquement ambigu).</li>
                <li><strong>303 See Other</strong> ‚Äî Apr√®s un POST, rediriger vers une ressource (pattern PRG: Post‚ÄëRedirect‚ÄëGet).</li>
                <li><strong>307 Temporary Redirect</strong> ‚Äî Redirection temporaire <em>sans changer la m√©thode</em>.</li>
                <li><strong>308 Permanent Redirect</strong> ‚Äî Redirection permanente <em>sans changer la m√©thode</em>.</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-user-shield"></i> 4xx ‚Äî Erreurs c√¥t√© client</h4>
              <ul>
                <li><strong>400 Bad Request</strong> ‚Äî Requ√™te invalide (syntaxe, JSON mal form√©).</li>
                <li><strong>401 Unauthorized</strong> ‚Äî Authentification requise/manquante/incorrecte (WWW‚ÄëAuthenticate pertinent).</li>
                <li><strong>403 Forbidden</strong> ‚Äî Authentifi√© mais non autoris√© (RBAC/ABAC).</li>
                <li><strong>404 Not Found</strong> ‚Äî Ressource / route inexistante.</li>
                <li><strong>405 Method Not Allowed</strong> ‚Äî M√©thode non support√©e sur cette ressource (+ <code>Allow</code>).</li>
                <li><strong>406 Not Acceptable</strong> ‚Äî N√©gociation de contenu impossible (Accept/Content‚ÄëType).</li>
                <li><strong>409 Conflict</strong> ‚Äî Conflit d‚Äô√©tat (concurrence optimiste, doublon logique).</li>
                <li><strong>410 Gone</strong> ‚Äî Ressource supprim√©e d√©finitivement (utile pour d√©pr√©cations).</li>
                <li><strong>412 Precondition Failed</strong> ‚Äî √âchec d‚Äô<em>ETag</em>/<em>If‚ÄëMatch</em> (contr√¥le de concurrence).</li>
                <li><strong>415 Unsupported Media Type</strong> ‚Äî Mauvais <code>Content-Type</code> (ex: pas de JSON).</li>
                <li><strong>422 Unprocessable Entity</strong> ‚Äî Donn√©es valides mais non conformes au m√©tier (validation).</li>
                <li><strong>429 Too Many Requests</strong> ‚Äî Rate limiting (ajoutez <code>Retry-After</code>).</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-server"></i> 5xx ‚Äî Erreurs c√¥t√© serveur</h4>
              <ul>
                <li><strong>500 Internal Server Error</strong> ‚Äî Exception impr√©vue. Log obligatoire avec <code>correlationId</code>.</li>
                <li><strong>501 Not Implemented</strong> ‚Äî Fonctionnalit√© non support√©e.</li>
                <li><strong>502 Bad Gateway</strong> ‚Äî Proxy/gateway en √©chec en amont.</li>
                <li><strong>503 Service Unavailable</strong> ‚Äî Maintenance / surcharge (avec <code>Retry-After</code>).</li>
                <li><strong>504 Gateway Timeout</strong> ‚Äî D√©lai d√©pass√© c√¥t√© gateway.</li>
              </ul>

              <h4 class="mt-4"><i class="fas fa-list"></i> Liste exhaustive par code</h4>
              <p>Pour r√©f√©rence compl√®te, voici les codes standard reconnus (incluant certains WebDAV et codes r√©cents):</p>

              <h5 class="mt-3">1xx Information</h5>
              <ul>
                <li><strong>100</strong> Continue</li>
                <li><strong>101</strong> Switching Protocols</li>
                <li><strong>102</strong> Processing (WebDAV)</li>
                <li><strong>103</strong> Early Hints</li>
              </ul>

              <h5 class="mt-3">2xx Succ√®s</h5>
              <ul>
                <li><strong>200</strong> OK</li>
                <li><strong>201</strong> Created</li>
                <li><strong>202</strong> Accepted</li>
                <li><strong>203</strong> Non-Authoritative Information</li>
                <li><strong>204</strong> No Content</li>
                <li><strong>205</strong> Reset Content</li>
                <li><strong>206</strong> Partial Content</li>
                <li><strong>207</strong> Multi-Status (WebDAV)</li>
                <li><strong>208</strong> Already Reported (WebDAV)</li>
                <li><strong>226</strong> IM Used</li>
              </ul>

              <h5 class="mt-3">3xx Redirection</h5>
              <ul>
                <li><strong>300</strong> Multiple Choices</li>
                <li><strong>301</strong> Moved Permanently</li>
                <li><strong>302</strong> Found</li>
                <li><strong>303</strong> See Other</li>
                <li><strong>304</strong> Not Modified</li>
                <li><strong>305</strong> Use Proxy (d√©pr√©ci√©)</li>
                <li><strong>306</strong> (Unused)</li>
                <li><strong>307</strong> Temporary Redirect</li>
                <li><strong>308</strong> Permanent Redirect</li>
              </ul>

              <h5 class="mt-3">4xx Erreur client</h5>
              <ul>
                <li><strong>400</strong> Bad Request</li>
                <li><strong>401</strong> Unauthorized</li>
                <li><strong>402</strong> Payment Required (r√©serv√©)</li>
                <li><strong>403</strong> Forbidden</li>
                <li><strong>404</strong> Not Found</li>
                <li><strong>405</strong> Method Not Allowed</li>
                <li><strong>406</strong> Not Acceptable</li>
                <li><strong>407</strong> Proxy Authentication Required</li>
                <li><strong>408</strong> Request Timeout</li>
                <li><strong>409</strong> Conflict</li>
                <li><strong>410</strong> Gone</li>
                <li><strong>411</strong> Length Required</li>
                <li><strong>412</strong> Precondition Failed</li>
                <li><strong>413</strong> Payload Too Large</li>
                <li><strong>414</strong> URI Too Long</li>
                <li><strong>415</strong> Unsupported Media Type</li>
                <li><strong>416</strong> Range Not Satisfiable</li>
                <li><strong>417</strong> Expectation Failed</li>
                <li><strong>418</strong> I'm a teapot (RFC 2324, humoristique mais parfois utilis√©)</li>
                <li><strong>421</strong> Misdirected Request</li>
                <li><strong>422</strong> Unprocessable Entity (WebDAV)</li>
                <li><strong>423</strong> Locked (WebDAV)</li>
                <li><strong>424</strong> Failed Dependency (WebDAV)</li>
                <li><strong>425</strong> Too Early</li>
                <li><strong>426</strong> Upgrade Required</li>
                <li><strong>428</strong> Precondition Required</li>
                <li><strong>429</strong> Too Many Requests</li>
                <li><strong>431</strong> Request Header Fields Too Large</li>
                <li><strong>451</strong> Unavailable For Legal Reasons</li>
              </ul>

              <h5 class="mt-3">5xx Erreur serveur</h5>
              <ul>
                <li><strong>500</strong> Internal Server Error</li>
                <li><strong>501</strong> Not Implemented</li>
                <li><strong>502</strong> Bad Gateway</li>
                <li><strong>503</strong> Service Unavailable</li>
                <li><strong>504</strong> Gateway Timeout</li>
                <li><strong>505</strong> HTTP Version Not Supported</li>
                <li><strong>506</strong> Variant Also Negotiates</li>
                <li><strong>507</strong> Insufficient Storage (WebDAV)</li>
                <li><strong>508</strong> Loop Detected (WebDAV)</li>
                <li><strong>510</strong> Not Extended</li>
                <li><strong>511</strong> Network Authentication Required</li>
              </ul>

              <div class="progression-note mt-4">
                <h4>Checklist d‚Äôusage recommand√©e</h4>
                <p>Cr√©ation: <code>201 + Location</code> ‚Ä¢ Mise √† jour compl√®te: <code>200</code> ou <code>204</code> ‚Ä¢ Suppression: <code>204</code> ‚Ä¢ Validation: <code>422</code> ‚Ä¢ Auth manquante: <code>401</code> ‚Ä¢ Interdit: <code>403</code> ‚Ä¢ Conflit: <code>409</code> ‚Ä¢ Rate limit: <code>429 + Retry-After</code> ‚Ä¢ Panne: <code>5xx</code>.</p>
              </div>

              <h4 class="mt-4"><i class="fas fa-tools"></i> Mappage propre c√¥t√© serveur (id√©e)</h4>
              <pre><code>// Exemple de mapping d'exceptions ‚Üí codes & RFC 7807
switch (error.name) {
  case 'ValidationError': return problem(422, 'validation-error', 'Validation failed', error.message, { errors: error.details })
  case 'AuthMissingError': return problem(401, 'auth-missing', 'Authentication required', 'No token provided')
  case 'ForbiddenError': return problem(403, 'forbidden', 'Not allowed', 'Insufficient permissions')
  case 'ConflictError': return problem(409, 'conflict', 'Conflict', error.message)
  default: return problem(500, 'internal', 'Internal Server Error', 'Unexpected error')
}
              </code></pre>

              <div class="progression-note mt-4">
                <h4>Pi√®ges fr√©quents</h4>
                <p>Tout renvoyer en <code>200</code> ‚Äúavec un code d‚Äôerreur dans le JSON‚Äù ‚Ä¢ Utiliser <code>401</code> pour des droits insuffisants (c‚Äôest <code>403</code>) ‚Ä¢ R√©pondre <code>200</code> apr√®s cr√©ation (pr√©f√©rez <code>201</code> + <code>Location</code>).</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- R√©capitulatif et Points Cl√©s -->
  <section class="recapitulatif">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">üéì R√©capitulatif et Points Cl√©s</h2>
        <p class="section-subtitle">Ce qu'il faut absolument retenir de cette matin√©e</p>
      </div>

      <div class="points-cles">
        <div class="point-card">
          <div class="point-icon">üåê</div>
          <h3>1. Les web services permettent l'interop√©rabilit√© universelle</h3>
          <p>Un seul backend peut servir tous vos clients : applications mobiles iOS et Android, sites web, objets connect√©s IoT, syst√®mes internes. Vous d√©veloppez la logique m√©tier une fois, vous l'exposez via une API bien con√ßue, et tous vos clients en profitent.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">üåç</div>
          <h3>2. REST domine le paysage actuel</h3>
          <p>Environ 80% des APIs publiques sont en REST. SOAP survit dans les syst√®mes legacy et les domaines r√©glement√©s. GraphQL et gRPC ont leurs niches (interfaces riches et communications internes performantes respectivement). Si vous cr√©ez une nouvelle API en 2025, REST est le choix par d√©faut sauf cas sp√©ciaux.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">‚ö°</div>
          <h3>3. HTTP est simple mais incroyablement puissant</h3>
          <p>Comprendre les m√©thodes HTTP, les headers et les codes de statut est fondamental. Ces concepts simples permettent de construire des syst√®mes extr√™mement sophistiqu√©s.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">üîß</div>
          <h3>4. Chaque m√©thode HTTP a son r√¥le</h3>
          <ul>
            <li><strong>GET</strong> : lire une ressource (safe, idempotent, pas de body)</li>
            <li><strong>POST</strong> : cr√©er une ressource (ni safe ni idempotent, avec body)</li>
            <li><strong>PUT</strong> : remplacer compl√®tement une ressource (idempotent, avec body complet)</li>
            <li><strong>PATCH</strong> : modifier partiellement une ressource (avec body partiel)</li>
            <li><strong>DELETE</strong> : supprimer une ressource (idempotent, g√©n√©ralement sans body)</li>
          </ul>
          <p>Ne m√©langez pas les r√¥les. N'utilisez jamais GET pour supprimer ou modifier quelque chose.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">üö¶</div>
          <h3>5. Les codes de statut ont du sens pr√©cis</h3>
          <ul>
            <li><strong>2xx</strong> : succ√®s (200 OK, 201 Created, 204 No Content)</li>
            <li><strong>3xx</strong> : redirection (301 Moved Permanently, 304 Not Modified)</li>
            <li><strong>4xx</strong> : erreur du client - c'est lui qui a mal fait (400, 401, 403, 404, 422, 429)</li>
            <li><strong>5xx</strong> : erreur du serveur - c'est notre faute (500, 502, 503, 504)</li>
          </ul>
          <p>Utiliser les bons codes de statut facilite √©norm√©ment le debugging et am√©liore l'exp√©rience d√©veloppeur.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">üìÑ</div>
          <h3>6. JSON est le format standard moderne</h3>
          <p>Simple, l√©ger, universel, natif JavaScript. √Ä moins d'avoir une raison sp√©cifique (legacy, r√©glementation, performance extr√™me), choisissez JSON. Utilisez ISO 8601 pour les dates, soyez coh√©rent dans le nommage, enveloppez les tableaux dans des objets avec m√©tadonn√©es.</p>
        </div>

        <div class="point-card">
          <div class="point-icon">üèóÔ∏è</div>
          <h3>7. L'architecture client-serveur s√©pare les responsabilit√©s</h3>
          <p>Le client n'a pas besoin de savoir comment le serveur fait son travail. Cette s√©paration permet de faire √©voluer les deux ind√©pendamment. Vous pouvez refaire compl√®tement votre interface utilisateur sans toucher au backend. Vous pouvez optimiser ou r√©√©crire votre serveur sans impacter les clients.</p>
        </div>
      </div>

      <div class="ressources-complementaires">
        <h3>üìö Ressources Compl√©mentaires</h3>
        <div class="ressources-grid">
          <div class="ressource-category">
            <h4>üìñ Documentation officielle</h4>
            <ul>
              <li>RFC 7231 : HTTP/1.1 Semantics and Content</li>
              <li>RFC 7807 : Problem Details for HTTP APIs</li>
              <li>Sp√©cification OpenAPI 3.0</li>
              <li>JSON Schema</li>
            </ul>
          </div>
          
          <div class="ressource-category">
            <h4>üìö Livres recommand√©s</h4>
            <ul>
              <li>"Architectural Styles and the Design of Network-based Software Architectures" par Roy Fielding (2000)</li>
              <li>"RESTful Web APIs" par Leonard Richardson et Mike Amundsen</li>
              <li>"Designing Data-Intensive Applications" par Martin Kleppmann</li>
            </ul>
          </div>
          
          <div class="ressource-category">
            <h4>üõ†Ô∏è Outils √† explorer</h4>
            <ul>
              <li><strong>Postman</strong> : L'outil incontournable pour tester des APIs</li>
              <li><strong>Swagger Editor</strong> : √âditeur en ligne pour cr√©er vos fichiers OpenAPI</li>
              <li><strong>HTTPie</strong> : Client HTTP en ligne de commande, plus friendly que curl</li>
              <li><strong>JSON Formatter</strong> : Extension navigateur pour afficher du JSON format√©</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="motivation-final">
        <div class="motivation-content">
          <h3>üåü Un dernier mot</h3>
          <p>Les web services sont au c≈ìur de l'informatique moderne. Chaque application que vous utilisez quotidiennement ‚Äì Instagram, Uber, Netflix, WhatsApp ‚Äì repose sur des APIs. Les comp√©tences que vous allez acqu√©rir dans ce cours sont parmi les plus demand√©es sur le march√© du travail. Un d√©veloppeur qui ma√Ætrise la conception et l'impl√©mentation d'APIs REST solides et s√©curis√©es trouvera facilement un emploi n'importe o√π dans le monde.</p>
          
          <p>Mais au-del√† de l'aspect carri√®re, c'est intellectuellement fascinant. Vous allez comprendre comment des syst√®mes distribu√©s communiquent, comment g√©rer l'authentification et la s√©curit√©, comment scaler pour g√©rer des millions d'utilisateurs, comment architecturer des microservices. Ce sont des probl√®mes complexes avec des solutions √©l√©gantes.</p>
          
          <p>Durant ces 9 jours, vous allez construire une vraie plateforme de microservices pour une ville intelligente. Ce n'est pas un exercice th√©orique dans le vide. C'est un projet concret que vous pourrez montrer dans votre portfolio, dont vous pourrez parler en entretien d'embauche, et qui vous donnera une exp√©rience pratique pr√©cieuse.</p>
          
          <div class="call-to-action">
            <h4>üöÄ Maintenant, place √† la pratique !</h4>
            <p>Alors profitez de ces sessions. Posez des questions quand vous ne comprenez pas. Exp√©rimentez, faites des erreurs, cassez des choses et r√©parez-les. C'est comme √ßa qu'on apprend vraiment. Les meilleurs d√©veloppeurs que je connais ne sont pas ceux qui n'ont jamais fait d'erreurs, mais ceux qui ont fait √©norm√©ment d'erreurs, en ont tir√© des le√ßons, et sont devenus excellents gr√¢ce √† √ßa.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <div class="footer-logo">
            <img src="../assets/logo.jpeg" alt="YNOV Campus" class="footer-logo-img">
            <span class="footer-logo-text">APIs & Microservices</span>
          </div>
          <p class="footer-description">Jour 1 ‚Äî Fondamentaux REST & Lancement Agile.</p>
        </div>
        <div class="footer-section">
          <h3>Navigation</h3>
          <ul>
            <li><a href="../index.html#programme">Programme</a></li>
            <li><a href="../index.html#projet">Projet</a></li>
            <li><a href="#atelier">Atelier J1</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Ressources</h3>
          <ul>
            <li>RFC 7807</li>
            <li>OpenAPI</li>
            <li>Postman</li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Contact</h3>
          <div class="contact-info">
            <p><i class="fas fa-envelope"></i> contact@ynov.com</p>
            <p><i class="fas fa-map-marker-alt"></i> Campus Ynov</p>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 YNOV Campus. Tous droits r√©serv√©s.</p>
      </div>
    </div>
  </footer>

  <script src="../script.js"></script>
  
  <!-- highlight.js pour la coloration syntaxique -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    // Auto-d√©tection et coloration de tous les blocs de code
    document.addEventListener('DOMContentLoaded', function() {
      hljs.highlightAll();
    });
  </script>
</body>
</html>
